/* eslint-env browser */
import snabbdom from 'snabbdom';
import h from 'snabbdom/h';
import { pathOr } from 'ramda';
import * as most from 'most';

import herro from './components/herro';

const patch = snabbdom.init([
  require('snabbdom/modules/class').default,
  require('snabbdom/modules/props').default,
  require('snabbdom/modules/style').default,
  require('snabbdom/modules/eventlisteners').default,
]);

var view = (model, stream) => {
  return h('div', [
    herro(model, stream),
    h('p', `you look ${pathOr('stinky', [ 'feelz' ], model)} today`),
  ]);
};

window.stream = '';

let mount = document.getElementById('snabby');

var render = (() => {
  return model => {
    mount = patch(mount, view(model, stream));
    console.log(mount);
  };
})();
render({ name: 'timmy', feelz: 'crunchy' });
