/* eslint-env browser, jquery */
import { bus } from 'partybus';

const { fetch } = window;

const prefetch = language_list => {
  language_list.forEach(locale => {
    fetch(`lang/${locale}.json`)
      .then(response => response.json())
      .then(json => {
        bus.emit('translation::loaded', { locale, json });
        bus.emit(`translation::loaded::${locale}`, json);
      })
      .catch(ex => console.log('translation file parsing failed', ex));
  });
  // changeLocale(current_locale);
};

export default prefetch;
