import { Selector } from 'testcafe';
import { HucklebuckDemoPage } from './hucklebuckdemo';

fixture('Hucklebuck Course Builder').page('http://localhost:3000/');

test('Modal page', async t => {
  const page = new HucklebuckDemoPage();

  // Open modal dialog
  await t.click(page.sectionMenuLaunch);
  // .expect(page.sectionMenuModal.isVisible())
  // .ok();
  // Click on the button and check popover
  await t
    .click(page.sectionMenuModal.closeButton)
    .expect(page.sectionMenuModal.isVisible())
    .ok()
    .expect(page.popoverTitle.textContent)
    .eql('Popover title');

  // Check links with tooltips.
  await t
    .expect(page.tooltip.count)
    .eql(0)
    .hover(page.modalDialog.linkWithTopTooltip)
    .expect(page.tooltip.count)
    .eql(1)
    .expect(page.tooltip.textContent)
    .eql('Tooltip on top')
    .hover(page.tooltip)
    .expect(page.tooltip.count)
    .eql(0)
    .hover(page.modalDialog.linkWithBottomTooltip)
    .expect(page.tooltip.count)
    .eql(1)
    .expect(page.tooltip.textContent)
    .eql('Tooltip on bottom')
    .hover(page.tooltip)
    .expect(page.tooltip.count)
    .eql(0);
  // Close modal dialog
  // await t.click(page.modalDialog.saveButton);
  // .expect(page.modalDialog.isVisible()).notOk()
  // .expect(page.popoverTitle.visible).notOk()
});
